<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QHTML Demo</title> 
    <script src="qhtml.js" type="text/javascript"></script>
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<script src="https://www.w3schools.com/lib/w3.js"></script>

</head>
<body>
    <!-- Sample usage of the q-html component -->
 
 <q-html>
        div {
            class: "w3-container";
            h1 {
                class: "w3-title";
                content: "q-html homepage";
            }
            div { 
		class: "w3-bar w3-blue tabnav";
		 a { class: "w3-bar-item w3-button"; content: "Home"; href: "#"; onclick: "toggleTab('Home')"; } 
		 a { class: "w3-bar-item w3-button"; content: "About"; href: "#"; onclick: "toggleTab('Download')"; } 
		 a { class: "w3-bar-item w3-button"; content: "Download"; href: "#"; onclick: "toggleTab('About')"; } 
	}
        div { id: "tab_About"; class: "w3-card w3-margin w3-hide";
               	p {
	              class: "w3-container";
                      content: "This is the About page";
               	  }
	          button {
        	       class: "w3-btn w3-blue w3-margin";
			content: "Click Me!";
			onclick: "openModal()";
        	  }
	  }
	div { id: "tab_Home"; class: "w3-card w3-margin w3-hide";
               	p {
	              class: "w3-container";
                      content: "This is the Home page.";
               	  }
		TextArea {
			id: "qhtmlEditor";
			onChange: "updateQHTMLFromEditor()";
			content: "";
			class: "w3-large w3-input";
		}
		div {
			id: "qhtmlPreview";
			class: "w3-wide w3-card";
		}
	          
	  }
	div { id: "tab_Download"; class: "w3-card w3-margin w3-hide";
               	p {
	              class: "w3-container";
                      content: "Here's the contact page";
               	  }
table { id: "maintable"; class: "w3-table w3-border-blue w3-grey w3-striped w3-text-black w3-card";
			th {
			  content: "Column 1";
			}
			th {
			  content: "Column 2";
			}
			th {
			  content: "{{column3}}";
			}
			tr {
				td { content: "asdf"; }
				td { content: "asdf"; }
				td { content: "asdf"; }
			}
			tr {
				td { content: "1234"; }
				td { content: "4567"; }
				td { content: "7890"; }
			}
			tr {
				td { content: "asdf"; }
				td { content: "asdf"; }
				td { content: "asdf"; }
			}
		}
	          button {
        	       class: "w3-btn w3-blue w3-margin";
			content: "Click Me!";
			onclick: "openModal()";
        	  }
	  }
          div {
 		class: "w3-modal";
		id: "myModal";
                div {
		    id: "myModalContent";
		    class: "w3-modal-content w3-container w3-card w3-large w3-white w3-padding";
		    header {
			class: "w3-header w3-blue w3-bar w3-padding w3-border";
			content: "my dialog";
		   }
		    article {
			id: "myModalMessage";
                        class: "w3-container w3-center w3-white w3-normal w3-padding w3-margin";
			content: "heres my dialog";
			br {

			}
			br {

			}
			span {
				content: "Dialog";
			}
	            }
		    div {
			class: "w3-footer w3-blue w3-center w3-large w3-padding";
			button {
  				 class: "w3-btn w3-blue w3-margin";
		                 content: "Close";
				 onclick: "closeModal()";
			}
		   }
		}
	   }
        }
    </q-html>


<style> 
#myModalContent {
}
#myModalMessage {
	height: 30vh
}
</style>
<script>
function openModal() {
	document.querySelector("#myModal").style.display = 'block';
}
function closeModal() {
	document.querySelector("#myModal").style.display = 'none';
}


document.addEventListener("QHTMLContentLoaded", function() {
   	console.log(document.querySelectorAll("button"));
w3.displayObject('maintable', ({'column3': 'Contact'}));
qOne("#qhtmlEditor").value = `div {
    class: "w3-row w3-container w3-margin-top";
    div {
        class: "w3-third w3-justify w3-container";
        h2 {
            content: "Empty Notebook Found";
        }
        p {
            content: "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.";
        }

    }
    div {
        class: "w3-third w3-justify w3-container";

        p {
            content: "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.";
        }

    }
    div {
        class: "w3-third w3-justify w3-container";
        h2 {
            content: "Very New News!";
        }
        p {
            content: "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.";
        }

    }
}`
	
});

// document.querySelector / document.querySelectorAll 
function qOne(sel) { return document.querySelector(sel); }
function qAll(sel) { return document.querySelectorAll(sel) }

// tranform DOM Element List into Javascript Array and map the result of func(element) for each element
function mapFunc(list, func) {
	var tmap = [];
	list.forEach(function(tm) { tmap.push(tm) })
	return tmap.map(function(item) { return func(item) })
}

// hide all tabs except for tabName
function toggleTab(tabName) {
	var tabPages = mapFunc(qAll("a"), itm => ({ name: itm.innerText, tab: "#tab_" + itm.innerText }))
	tabPages.forEach(obj => { 
	     qOne(obj.tab).className = obj.name == tabName ? "w3-card w3-margin" : "w3-card w3-margin w3-hide"; 
	})
}
function updateQHTMLFromEditor() {
	var qp = qOne("#qhtmlPreview");
	qp.innerHTML = "";
	qp.innerHTML = `<q-html>${qOne("#qhtmlEditor").value}</q-html>`;
	
}

</script>
</body>
</html>